[package]
name = "stratum-server"
version = "3.0.0-beta.27"
authors = ["Urkel Labs Engineering <engineering@urkellabs.com>"]
edition = "2021"
license = "MIT"
description = "The server code for the Rust Stratum (v1) implementation"

[features]
default = ["tcp"]
tcp = []
websockets = ["async-tungstenite"]

[dependencies]

##### Known External #####
extended-primitives = {version = "0.3.4"}
encodings = "0.1.0"

##### Unknown Externals #####

# Futures
async-std = {version = "1.10.0", features = ["attributes"] }
async-trait = "0.1.52"
futures = "0.3.21"
smol = "1.2.5"
stop-token = "0.7.0"
tide = "0.16"

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# Metrics
# metrics = { version="0.13.0-alpha.8" }
# metrics-exporter-prometheus = "0.1.0-alpha.5"


# Misc
uuid = { version = "0.8.2", features = ["serde", "v4"] }
log = "0.4"
#@todo I would like to switch this to time v3 I believe.
chrono = "0.4"
# @todo come back to this -> Maybe use their async-std adapter and then we can remove smol
signal-hook = "0.1.16"
bit-set = "0.5.2"
# jemallocator = "0.3.2"

# Optional
async-tungstenite = { version="0.8.0", features=["async-std-runtime", "async-native-tls"], optional=true}

[dev-dependencies]
criterion = "0.3"
async-std = {version = "1.10.0", features = ["attributes", "unstable"] }
portpicker = "0.1.0"
nix = "0.18"
#maybe switch this w/ Test_logger.
env_logger = "0.8.1"
serial_test = "0.5.0"

[[bench]]
name = "bench_main"
harness = false

[package.metadata.release]
tag = false
sign-commit = false
pre-release-commit-message = "chore(server): release {{ version }}"
